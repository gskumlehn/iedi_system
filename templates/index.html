{% extends "base.html" %}

{% block title %}Dashboard - IEDI{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Dashboard</h1>
        <p class="page-description">Sistema de Gestão IEDI - Índice de Exposição Digital na Imprensa</p>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-header">
            <span class="stat-title">Bancos</span>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        </div>
        <div class="stat-value" id="stat-bancos">0</div>
        <p class="stat-description">Bancos cadastrados</p>
    </div>

    <div class="stat-card">
        <div class="stat-header">
            <span class="stat-title">Veículos Relevantes</span>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        </div>
        <div class="stat-value" id="stat-relevantes">0</div>
        <p class="stat-description">Veículos de grande alcance</p>
    </div>

    <div class="stat-card">
        <div class="stat-header">
            <span class="stat-title">Veículos de Nicho</span>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
        </div>
        <div class="stat-value" id="stat-nicho">0</div>
        <p class="stat-description">Veículos especializados</p>
    </div>

    <div class="stat-card">
        <div class="stat-header">
            <span class="stat-title">Análises</span>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="20" x2="12" y2="10"></line>
                <line x1="18" y1="20" x2="18" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="16"></line>
            </svg>
        </div>
        <div class="stat-value" id="stat-analises">0</div>
        <p class="stat-description">Análises realizadas</p>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Bem-vindo ao Sistema IEDI</h2>
        <p class="card-description">Gerencie bancos, veículos de imprensa e visualize análises de exposição digital</p>
    </div>
    <div class="card-content">
        <p class="text-muted">
            O sistema IEDI permite gerenciar e analisar a presença digital de bancos na imprensa brasileira.
            Utilize o menu lateral para navegar entre as diferentes funcionalidades.
        </p>
    </div>
</div>

<script>
// Carregar estatísticas
async function loadStats() {
    try {
        const [bancos, relevantes, nicho, analises] = await Promise.all([
            apiRequest('/bancos/api'),
            apiRequest('/veiculos/api/relevantes'),
            apiRequest('/veiculos/api/nicho'),
            apiRequest('/analises/api')
        ]);
        
        document.getElementById('stat-bancos').textContent = bancos.length;
        document.getElementById('stat-relevantes').textContent = relevantes.length;
        document.getElementById('stat-nicho').textContent = nicho.length;
        document.getElementById('stat-analises').textContent = analises.length;
    } catch (error) {
        console.error('Erro ao carregar estatísticas:', error);
    }
}

document.addEventListener('DOMContentLoaded', loadStats);
</script>
{% endblock %}
